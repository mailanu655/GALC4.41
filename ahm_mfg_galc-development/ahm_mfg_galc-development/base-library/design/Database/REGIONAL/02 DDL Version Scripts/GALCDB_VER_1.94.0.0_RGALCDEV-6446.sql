ALTER TABLE GALADM.QI_PLANT_TBX ADD COLUMN PDDA_LINE CHAR(1);

ALTER TABLE GALADM.AUDIT_LOG_TBX DATA CAPTURE NONE;
ALTER TABLE GALADM.AUDIT_LOG_TBX ALTER COLUMN COLUMN_NAME SET DATA TYPE VARCHAR(128);
ALTER TABLE GALADM.AUDIT_LOG_TBX DATA CAPTURE CHANGES;
REORG TABLE GALADM.AUDIT_LOG_TBX;


ALTER TABLE GALADM.AUDIT_LOG_TBX DATA CAPTURE NONE;
ALTER TABLE GALADM.AUDIT_LOG_TBX ALTER COLUMN UPDATE_REASON SET DATA TYPE VARCHAR(275);
ALTER TABLE GALADM.AUDIT_LOG_TBX DATA CAPTURE CHANGES;
REORG TABLE GALADM.AUDIT_LOG_TBX;

ALTER TABLE GALADM.QI_DEPT_TBX DATA CAPTURE NONE;
ALTER TABLE GALADM.QI_DEPT_TBX ALTER COLUMN PDDA_DEPT SET DATA TYPE CHAR(2);
ALTER TABLE GALADM.QI_DEPT_TBX DATA CAPTURE CHANGES;
REORG TABLE GALADM.QI_DEPT_TBX;

------------------------------------------------
-- DDL Statements for Table "GALADM  "."QI_PDDA_RESPONSIBILITY_TBX"
------------------------------------------------

DROP TRIGGER GALADM.QI_PDDA_RESPONSIBILITY_TR1;
DROP TRIGGER GALADM.QI_PDDA_RESPONSIBILITY_TR2;
DROP TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX;

CREATE TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX
(
	PDDA_RESPONSIBILITY_ID  INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY
		  (START WITH 1, INCREMENT BY 1, NO CACHE, NO MINVALUE, NO MAXVALUE, NO CYCLE, NO ORDER) ,
	PCL_TO_QICS_SEQ_KEY   INTEGER,
	RESP_COMPANY          VARCHAR(32),
	RESP_SITE             CHAR(16),
	RESP_PLANT            CHAR(16),
	RESP_DEPT             CHAR(16),
	ENTRY_SITE            CHARACTER(16),
	ENTRY_PLANT           CHARACTER(16),
	PRODUCT_TYPE          CHARACTER(10),
	ROW_TYPE              CHAR(1),
	RESP_LEVEL1           VARCHAR(32),
	RESP_LEVEL2           VARCHAR(32),
	MODEL_YEAR            DECIMAL(5,1),
	VEHICLE_MODEL_CODE    CHAR(1),
	PDDA_LINE             CHAR(1),
	PROCESS_NUMBER        CHAR(5),
	UNIT_NUMBER           CHAR(6),
	RESP_LEVEL1_DESC      VARCHAR(32),
	PROD_SCH_QTY          DECIMAL(5,1),
	PROCESS_NAME          VARCHAR(35),
	UNIT_DESC     		  VARCHAR(254),
	UNIT_RANK             VARCHAR(20),
	SHORT_PLANT_CODE      CHAR(1),
	PDDA_DEPT_CODE        CHAR(2),
	BASE_PART_NO          CHAR(5),
	CREATE_TIMESTAMP      TIMESTAMP,
	UPDATE_TIMESTAMP      TIMESTAMP,
	CREATE_USER           CHAR(11),
	UPDATE_USER           CHAR(11) )
	IN GALTBSREF11 INDEX IN GALTBSIDX4 ;

COMMENT ON TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX IS 'NAQ PDDA Responsible';

CREATE UNIQUE INDEX GALADM.QI_PDDA_RESPONSIBILITY_I1
  ON GALADM.QI_PDDA_RESPONSIBILITY_TBX (PDDA_RESPONSIBILITY_ID);
  
CREATE INDEX GALADM.QI_PDDA_RESPONSIBILITY_I2
  ON GALADM.QI_PDDA_RESPONSIBILITY_TBX (PCL_TO_QICS_SEQ_KEY); 
  
CREATE INDEX GALADM.QI_PDDA_RESPONSIBILITY_I3
  ON GALADM.QI_PDDA_RESPONSIBILITY_TBX (RESP_COMPANY,RESP_SITE,RESP_PLANT,RESP_DEPT,ENTRY_SITE,ENTRY_PLANT,PRODUCT_TYPE,ROW_TYPE,RESP_LEVEL1,RESP_LEVEL2,MODEL_YEAR,VEHICLE_MODEL_CODE,PDDA_LINE,PROCESS_NUMBER,UNIT_NUMBER);      

ALTER TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX 
	ADD CONSTRAINT QI_PDDA_RESPONSIBILITY_PK PRIMARY KEY (PDDA_RESPONSIBILITY_ID);
		
ALTER TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX 
	ADD CONSTRAINT QI_PDDA_RESPONSIBILITY_C1 CHECK 
		(CREATE_USER = UPPER(CREATE_USER));

ALTER TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX  
	ADD CONSTRAINT QI_PDDA_RESPONSIBILITY_C2 CHECK 
		(UPDATE_USER = UPPER(UPDATE_USER));
		
ALTER TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX 
	ADD CONSTRAINT QI_PDDA_RESPONSIBILITY_C3 CHECK 
		(RESP_COMPANY = UPPER(RESP_COMPANY));			
		
ALTER TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX 
	ADD CONSTRAINT QI_PDDA_RESPONSIBILITY_C4 CHECK 
		(RESP_SITE = UPPER(RESP_SITE));	
		
ALTER TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX 
	ADD CONSTRAINT QI_PDDA_RESPONSIBILITY_C5 CHECK 
		(RESP_PLANT = UPPER(RESP_PLANT));	
		
ALTER TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX 
	ADD CONSTRAINT QI_PDDA_RESPONSIBILITY_C6 CHECK 
		(RESP_DEPT = UPPER(RESP_DEPT));		

CREATE TRIGGER GALADM.QI_PDDA_RESPONSIBILITY_TR1
  NO CASCADE BEFORE INSERT
  ON GALADM.QI_PDDA_RESPONSIBILITY_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET CREATE_TIMESTAMP=CURRENT_TIMESTAMP;

CREATE TRIGGER GALADM.QI_PDDA_RESPONSIBILITY_TR2
  NO CASCADE BEFORE UPDATE
  ON GALADM.QI_PDDA_RESPONSIBILITY_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET UPDATE_TIMESTAMP=CURRENT_TIMESTAMP; 
  
  ------------------------------------------------
-- DDL Statements for Table "GALADM  "."QI_PDDA_RESP_LOAD_TRIGGER_TBX"
------------------------------------------------

DROP TRIGGER GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TR1;
DROP TRIGGER GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TR2;
DROP TABLE GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TBX;

CREATE TABLE GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TBX
(
	PDDA_RESPONSIBILITY_ID  INTEGER NOT NULL ,
	PCL_TO_QICS_SEQ_KEY   INTEGER NOT NULL ,
	PREV_RESP_LEVEL1      VARCHAR(32),
	PREV_BASE_PART_NO     CHAR(5),
	PREV_RESP_LEVEL1_DESC  VARCHAR(32),
	PREV_PROCESS_NUMBER   CHAR(5),
	PREV_PROCESS_NAME     VARCHAR(35),
	PREV_UNIT_DESC		  VARCHAR(254),
	PREV_PDDA_LINE		  CHAR(1),
	ADMIN_CONFIRMED_FIX   SMALLINT,
	CREATE_TIMESTAMP      TIMESTAMP,
	UPDATE_TIMESTAMP      TIMESTAMP,
	CREATE_USER           CHAR(11),
	UPDATE_USER           CHAR(11) )
	IN GALTBSREF11 INDEX IN GALTBSIDX4 ;

COMMENT ON TABLE GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TBX IS 'NAQ PDDA Responsible Load Trigger';

CREATE UNIQUE INDEX GALADM.QI_PDDA_RESP_LOAD_TRIGGER_I1
  ON GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TBX (PDDA_RESPONSIBILITY_ID, PCL_TO_QICS_SEQ_KEY);

ALTER TABLE GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TBX 
	ADD CONSTRAINT QI_PDDA_RESP_LOAD_TRIGGER_PK PRIMARY KEY (PDDA_RESPONSIBILITY_ID, PCL_TO_QICS_SEQ_KEY);
		
ALTER TABLE GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TBX 
	ADD CONSTRAINT QI_PDDA_RESP_LOAD_TRIGGER_C1 CHECK 
		(CREATE_USER = UPPER(CREATE_USER));

ALTER TABLE GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TBX  
	ADD CONSTRAINT QI_PDDA_RESP_LOAD_TRIGGER_C2 CHECK 
		(UPDATE_USER = UPPER(UPDATE_USER));

CREATE TRIGGER GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TR1
  NO CASCADE BEFORE INSERT
  ON GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET CREATE_TIMESTAMP=CURRENT_TIMESTAMP;

CREATE TRIGGER GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TR2
  NO CASCADE BEFORE UPDATE
  ON GALADM.QI_PDDA_RESP_LOAD_TRIGGER_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET UPDATE_TIMESTAMP=CURRENT_TIMESTAMP;
  
  ------------------------------------------------
-- DDL Statements for Table "VOIS"."PALSQ1"
------------------------------------------------

DROP TRIGGER VIOS.PALSQ1_TR1;
DROP TRIGGER VIOS.PALSQ1_TR2;
DROP TABLE VIOS.PALSQ1;

CREATE TABLE VIOS.PALSQ1  (
				  PCL_TO_QICS_SEQ INTEGER NOT NULL,
                  COMPANY_CODE CHAR(5) NOT NULL WITH DEFAULT ' ' ,
                  PLANT_LOC_CODE CHAR(1) NOT NULL WITH DEFAULT ' ' ,
                  DEPT_CODE CHAR(2) NOT NULL WITH DEFAULT ' ' ,
                  TEAM_NO CHAR(4) NOT NULL WITH DEFAULT ' ' ,
                  TEAM_DESC CHAR(30) NOT NULL WITH DEFAULT ' ' ,
                  PROD_SCH_QTY DECIMAL(5,1) NOT NULL WITH DEFAULT 0.0 ,
                  MODEL_YEAR_DATE DECIMAL(5,1) NOT NULL WITH DEFAULT 0.0 ,
                  VEHICLE_MODEL_CODE CHAR(10) NOT NULL WITH DEFAULT ' ' ,
                  PROD_ASM_LINE_NO CHAR(1) NOT NULL WITH DEFAULT ' ' ,
                  ASM_PROC_NO CHAR(5) NOT NULL WITH DEFAULT ' ' ,
                  ASM_PROC_NAME CHAR(35) NOT NULL WITH DEFAULT ' ' ,
                  UNIT_NO CHAR(6) NOT NULL WITH DEFAULT ' ' ,
                  UNIT_RANK CHAR(20) WITH DEFAULT NULL ,
                  PROD_UNIT_ID_NO VARCHAR(20) WITH DEFAULT NULL ,
                  STATUS CHAR(8) NOT NULL WITH DEFAULT ' ' ,
                  BASE_PART_NO CHAR(5) NOT NULL WITH DEFAULT ' ' ,
                  DATA_COL_BY_QICS CHAR(1) WITH DEFAULT NULL ,
                  INSERT_LOGON_NO CHAR(50) NOT NULL WITH DEFAULT ' ' ,
                  UPDATE_LOGON_NO CHAR(50) WITH DEFAULT NULL ,
                  UNIT_OP_DESC_TEXT VARCHAR(254) NOT NULL WITH DEFAULT '' ,
  				  CREATE_TIMESTAMP TIMESTAMP,
				  UPDATE_TIMESTAMP TIMESTAMP,
  				  CONSTRAINT PALSQ1_PK PRIMARY KEY
  				  (PCL_TO_QICS_SEQ))
 IN VIOSTBSDAT1
 INDEX IN VIOSTBSIDX1;

ALTER TABLE VIOS.PALSQ1
DATA CAPTURE CHANGES
PCTFREE 0
LOCKSIZE ROW
APPEND OFF
NOT VOLATILE;

COMMENT ON TABLE VIOS.PALSQ1 IS 'PDDA Data for NAQ Responsibility';

CREATE INDEX VIOS.PALSQ1_I2
	ON VIOS.PALSQ1
     			(PLANT_LOC_CODE ASC,
                 DEPT_CODE ASC,
                 MODEL_YEAR_DATE ASC,
                 VEHICLE_MODEL_CODE ASC,
                 PROD_ASM_LINE_NO ASC,
                 UNIT_NO ASC)
ALLOW REVERSE SCANS;

CREATE TRIGGER VIOS.PALSQ1_TR1
   NO CASCADE BEFORE INSERT
   ON VIOS.PALSQ1
   REFERENCING NEW AS A
   FOR EACH ROW
SET CREATE_TIMESTAMP = CURRENT_TIMESTAMP;

CREATE TRIGGER VIOS.PALSQ1_TR2
   NO CASCADE BEFORE UPDATE
   ON VIOS.PALSQ1
   REFERENCING NEW AS A
   FOR EACH ROW
SET UPDATE_TIMESTAMP = CURRENT_TIMESTAMP;