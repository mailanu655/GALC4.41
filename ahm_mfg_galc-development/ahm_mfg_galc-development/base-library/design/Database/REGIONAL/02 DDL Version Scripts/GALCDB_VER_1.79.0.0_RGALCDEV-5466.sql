ALTER TABLE GALADM.QI_DEFECT_RESULT_TBX DATA CAPTURE NONE;
ALTER TABLE GALADM.QI_DEFECT_RESULT_TBX ALTER COLUMN PRODUCT_SPEC_CODE SET DATA TYPE VARCHAR(30);
ALTER TABLE GALADM.QI_DEFECT_RESULT_TBX ALTER COLUMN RESPONSIBLE_LEVEL1 SET DATA TYPE VARCHAR(32);
ALTER TABLE GALADM.QI_DEFECT_RESULT_TBX ALTER COLUMN RESPONSIBLE_LEVEL2 SET DATA TYPE VARCHAR(32);
REORG TABLE GALADM.QI_DEFECT_RESULT_TBX;
ALTER TABLE GALADM.QI_DEFECT_RESULT_TBX ALTER COLUMN RESPONSIBLE_LEVEL3 SET DATA TYPE VARCHAR(32);
REORG TABLE GALADM.QI_DEFECT_RESULT_TBX;
ALTER TABLE GALADM.QI_DEFECT_RESULT_TBX DATA CAPTURE CHANGES;

ALTER TABLE GALADM.QI_RESPONSIBLE_LEVEL_TBX DATA CAPTURE NONE;
ALTER TABLE GALADM.QI_RESPONSIBLE_LEVEL_TBX ALTER COLUMN RESPONSIBLE_LEVEL_NAME SET DATA TYPE VARCHAR(32);
REORG TABLE GALADM.QI_RESPONSIBLE_LEVEL_TBX;
ALTER TABLE GALADM.QI_RESPONSIBLE_LEVEL_TBX DATA CAPTURE CHANGES;


------------------------------------------------
-- DDL Statements for Table "GALADM  "."QI_REPAIR_RESULT_TBX"
------------------------------------------------

DROP TRIGGER GALADM.QI_REPAIR_RESULT_TR1;
DROP TRIGGER GALADM.QI_REPAIR_RESULT_TR2;
DROP TABLE GALADM.QI_REPAIR_RESULT_TBX;

CREATE TABLE GALADM.QI_REPAIR_RESULT_TBX
(
	REPAIR_ID INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY 
		  (START WITH 2000000000, INCREMENT BY 1, NO CACHE, NO MINVALUE, NO MAXVALUE, NO CYCLE, NO ORDER) ,	
	DEFECTRESULTID        INTEGER NOT NULL,
	ACTUAL_PROBLEM_SEQ	  SMALLINT NOT NULL,		  
	PRODUCT_ID            VARCHAR(17) NOT NULL,
	INSPECTION_PART_NAME  VARCHAR(32),
	INSPECTION_PART_LOCATION_NAME	VARCHAR(20),
	INSPECTION_PART_LOCATION2_NAME	VARCHAR(20),
	INSPECTION_PART2_NAME	VARCHAR(32),
	INSPECTION_PART2_LOCATION_NAME	VARCHAR(20),
	INSPECTION_PART2_LOCATION2_NAME	VARCHAR(20),
	INSPECTION_PART3_NAME	VARCHAR(32),
	DEFECT_TYPE_NAME	  VARCHAR(45),
	DEFECT_TYPE_NAME2	  VARCHAR(45),
	POINT_X               INTEGER,
	POINT_Y               INTEGER,
	IMAGE_NAME            VARCHAR(20),
	APPLICATION_ID        CHARACTER(16) NOT NULL,
	IQS_VERSION           CHAR(16),
	IQS_CATEGORY_NAME     CHARACTER(32),	
	IQS_QUESTION_NO       INTEGER,
	IQS_QUESTION          VARCHAR(256),
	THEME_NAME            VARCHAR(32),
	REPORTABLE            SMALLINT,
	RESPONSIBLE_SITE      CHAR(16),
	RESPONSIBLE_PLANT     CHAR(16),
	RESPONSIBLE_DEPT      VARCHAR(32),
	RESPONSIBLE_LEVEL3    VARCHAR(32),
	RESPONSIBLE_LEVEL2    VARCHAR(32),
	RESPONSIBLE_LEVEL1    VARCHAR(32),
	PROCESS_NUMBER        CHAR(8),
	PROCESS_NAME          VARCHAR(32),
	UNIT_NUMBER           CHAR(8),
	UNIT_DESC             VARCHAR(128),
	RESPONSIBLE_ASSOCIATE  CHAR(11),
	WRITE_UP_DEPARTMENT   VARCHAR(32),	
	ENTRY_SITE_NAME       CHAR(16),
	ENTRY_PLANT_NAME      CHAR(16),
	ENTRY_PROD_LINE_NO    SMALLINT,
	ENTRY_DEPT            VARCHAR(32),
	ACTUAL_TIMESTAMP      TIMESTAMP,
	DATE                  DATE,	
	SHIFT                 CHARACTER(2),	
	TEAM                  VARCHAR(10),
	PRODUCT_TYPE          CHAR(10),
	PRODUCT_SPEC_CODE     VARCHAR(30),
	PRODUCTION_LOT		  VARCHAR(20),
	KD_LOT_NUMBER		  CHAR(18),
	AF_ON_SEQUENCE_NUMBER	INTEGER,
	DEFECT_CATEGORY_NAME	VARCHAR(32),
	BOM_MAIN_PART_NO      CHAR(7),
	ORIGINAL_DEFECT_STATUS  SMALLINT,
	CURRENT_DEFECT_STATUS  SMALLINT,
	REPAIR_AREA           VARCHAR(20),
	REPAIR_METHOD_NAME_PLAN  VARCHAR(64),
	REPAIR_TIME_PLAN      INTEGER,	
	TEMPORARY_TRACKING    CHAR(18),
	DELETED               SMALLINT,
	GDP_DEFECT            SMALLINT,	
	TRPU_DEFECT           SMALLINT,	
	TERMINAL_NAME         CHARACTER(32),
	IS_REPAIR_RELATED 	  SMALLINT,	
	CREATE_TIMESTAMP      TIMESTAMP,
	UPDATE_TIMESTAMP      TIMESTAMP,
	CREATE_USER           CHAR(11),
	UPDATE_USER           CHAR(11) )
	IN GALTBSREF11 INDEX IN GALTBSIDX4 ;

COMMENT ON TABLE GALADM.QI_REPAIR_RESULT_TBX IS 'NAQ Repair Result';

CREATE UNIQUE INDEX GALADM.QI_REPAIR_RESULT_I1
  ON GALADM.QI_REPAIR_RESULT_TBX (REPAIR_ID);
  
CREATE INDEX GALADM.QI_REPAIR_RESULT_I2
  ON GALADM.QI_REPAIR_RESULT_TBX (DEFECTRESULTID ASC);  
  
CREATE INDEX GALADM.QI_REPAIR_RESULT_I3
  ON GALADM.QI_REPAIR_RESULT_TBX (PRODUCT_ID ASC);  
  
CREATE INDEX GALADM.QI_REPAIR_RESULT_I4
  ON GALADM.QI_REPAIR_RESULT_TBX (PRODUCT_ID ASC, ENTRY_DEPT ASC, CURRENT_DEFECT_STATUS ASC);    

CREATE INDEX GALADM.QI_REPAIR_RESULT_I5
  ON GALADM.QI_REPAIR_RESULT_TBX (DATE ASC, ENTRY_DEPT ASC, CURRENT_DEFECT_STATUS ASC, SHIFT ASC, PRODUCT_ID ASC);    

CREATE INDEX GALADM.QI_REPAIR_RESULT_I6
  ON GALADM.QI_REPAIR_RESULT_TBX (DEFECTRESULTID ASC, PRODUCT_ID ASC, ORIGINAL_DEFECT_STATUS ASC, ACTUAL_TIMESTAMP ASC);   
  
CREATE INDEX GALADM.QI_REPAIR_RESULT_I7
  ON GALADM.QI_REPAIR_RESULT_TBX (APPLICATION_ID ASC, PRODUCT_ID ASC, SHIFT ASC, DATE ASC);    
   
CREATE INDEX GALADM.QI_REPAIR_RESULT_I8
  ON GALADM.QI_REPAIR_RESULT_TBX (DATE ASC, ORIGINAL_DEFECT_STATUS ASC, APPLICATION_ID ASC, SHIFT ASC, PRODUCT_ID ASC);      
   
ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_PK PRIMARY KEY (REPAIR_ID);
		
ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C1 CHECK 
		(CREATE_USER = UPPER(CREATE_USER));

ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX  
	ADD CONSTRAINT QI_REPAIR_RESULT_C2 CHECK 
		(UPDATE_USER = UPPER(UPDATE_USER));
		
ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C3 CHECK 
		(INSPECTION_PART_NAME = UPPER(INSPECTION_PART_NAME));	
		
ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C4 CHECK 
		(INSPECTION_PART_LOCATION_NAME = UPPER(INSPECTION_PART_LOCATION_NAME));		

ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C5 CHECK 
		(INSPECTION_PART_LOCATION2_NAME = UPPER(INSPECTION_PART_LOCATION2_NAME));		
		
ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C6 CHECK 
		(INSPECTION_PART2_NAME = UPPER(INSPECTION_PART2_NAME));		
		
ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C7 CHECK 
		(INSPECTION_PART2_LOCATION_NAME = UPPER(INSPECTION_PART2_LOCATION_NAME));	
		
ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C8 CHECK 
		(INSPECTION_PART2_LOCATION2_NAME = UPPER(INSPECTION_PART2_LOCATION2_NAME));	
		
ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C9 CHECK 
		(INSPECTION_PART3_NAME = UPPER(INSPECTION_PART3_NAME));	

ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C10 CHECK 
		(DEFECT_TYPE_NAME = UPPER(DEFECT_TYPE_NAME));	
		
ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C11 CHECK 
		(DEFECT_TYPE_NAME2 = UPPER(DEFECT_TYPE_NAME2));			

ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C12 CHECK 
		(IMAGE_NAME = UPPER(IMAGE_NAME));		

ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C13 CHECK 
		(THEME_NAME = UPPER(THEME_NAME));	
		
ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C14 CHECK 
		(RESPONSIBLE_SITE = UPPER(RESPONSIBLE_SITE));		
		
ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C15 CHECK 
		(RESPONSIBLE_PLANT = UPPER(RESPONSIBLE_PLANT));
		
ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
	ADD CONSTRAINT QI_REPAIR_RESULT_C16 CHECK 
		(RESPONSIBLE_DEPT = UPPER(RESPONSIBLE_DEPT));

ALTER TABLE GALADM.QI_REPAIR_RESULT_TBX 
  DATA CAPTURE CHANGES
  PCTFREE 0
  LOCKSIZE ROW
  APPEND OFF
  NOT VOLATILE;

CREATE TRIGGER GALADM.QI_REPAIR_RESULT_TR1
  NO CASCADE BEFORE INSERT
  ON GALADM.QI_REPAIR_RESULT_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET CREATE_TIMESTAMP=CURRENT_TIMESTAMP;

CREATE TRIGGER GALADM.QI_REPAIR_RESULT_TR2
  NO CASCADE BEFORE UPDATE
  ON GALADM.QI_REPAIR_RESULT_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET UPDATE_TIMESTAMP=CURRENT_TIMESTAMP;
  
  