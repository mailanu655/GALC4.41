------------------------------------------------
-- DDL Statements for Table "GALADM  "."QI_REPORTING_METRIC_TBX"
------------------------------------------------

DROP TRIGGER GALADM.QI_REPORTING_METRIC_TR1;
DROP TRIGGER GALADM.QI_REPORTING_METRIC_TR2;
DROP TABLE GALADM.QI_REPORTING_METRIC_TBX;

CREATE TABLE GALADM.QI_REPORTING_METRIC_TBX
(
	METRIC_NAME           CHAR(10) NOT NULL,
	METRIC_DESCRIPTION    VARCHAR(64),
	METRIC_DATA_FORMAT    CHAR(16),
	CREATE_TIMESTAMP      TIMESTAMP,
	UPDATE_TIMESTAMP      TIMESTAMP,
	CREATE_USER           CHAR(11),
	UPDATE_USER           CHAR(11) )
	IN GALTBSREF11 INDEX IN GALTBSIDX4 ;

COMMENT ON TABLE GALADM.QI_REPORTING_METRIC_TBX IS 'NAQ Reporting METRIC';

CREATE UNIQUE INDEX GALADM.QI_REPORTING_METRIC_I1
  ON GALADM.QI_REPORTING_METRIC_TBX (METRIC_NAME);

ALTER TABLE GALADM.QI_REPORTING_METRIC_TBX 
	ADD CONSTRAINT QI_REPORTING_METRIC_PK PRIMARY KEY (METRIC_NAME);
		
ALTER TABLE GALADM.QI_REPORTING_METRIC_TBX 
	ADD CONSTRAINT QI_REPORTING_METRIC_C1 CHECK 
		(CREATE_USER = UPPER(CREATE_USER));

ALTER TABLE GALADM.QI_REPORTING_METRIC_TBX  
	ADD CONSTRAINT QI_REPORTING_METRIC_C2 CHECK 
		(UPDATE_USER = UPPER(UPDATE_USER));
		
ALTER TABLE GALADM.QI_REPORTING_METRIC_TBX 
	ADD CONSTRAINT QI_REPORTING_METRIC_C3 CHECK 
		(METRIC_NAME = UPPER(METRIC_NAME));	

ALTER TABLE GALADM.QI_REPORTING_METRIC_TBX 
  DATA CAPTURE CHANGES
  PCTFREE 0
  LOCKSIZE ROW
  APPEND OFF
  NOT VOLATILE;

CREATE TRIGGER GALADM.QI_REPORTING_METRIC_TR1
  NO CASCADE BEFORE INSERT
  ON GALADM.QI_REPORTING_METRIC_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET CREATE_TIMESTAMP=CURRENT_TIMESTAMP;

CREATE TRIGGER GALADM.QI_REPORTING_METRIC_TR2
  NO CASCADE BEFORE UPDATE
  ON GALADM.QI_REPORTING_METRIC_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET UPDATE_TIMESTAMP=CURRENT_TIMESTAMP;
  
  
------------------------------------------------
-- DDL Statements for Table "GALADM  "."QI_REPORTING_TARGET_TBX"
------------------------------------------------

DROP TRIGGER GALADM.QI_REPORTING_TARGET_TR1;
DROP TRIGGER GALADM.QI_REPORTING_TARGET_TR2;
DROP TABLE GALADM.QI_REPORTING_TARGET_TBX;

CREATE TABLE GALADM.QI_REPORTING_TARGET_TBX
(
	TARGET_ID INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY 
		  (START WITH 1, INCREMENT BY 1, NO CACHE, NO MINVALUE, NO MAXVALUE, NO CYCLE, NO ORDER) ,	
	SITE                  CHAR(16),
	PLANT                 CHAR(16),
	PRODUCT_TYPE          CHARACTER(10),
	MODEL_CODE            CHAR(3),
	MODEL_YEAR_DESCRIPTION  CHAR(4),
	DEMAND_TYPE           CHAR(2),
	METRIC_NAME           CHAR(10),
	METRIC_VALUE          DOUBLE,
	EFFECTIVE_DATE        DATE,
	TARGET                VARCHAR(32),
	TARGET_ITEM           VARCHAR(32),
	CREATE_TIMESTAMP      TIMESTAMP,
	UPDATE_TIMESTAMP      TIMESTAMP,
	CREATE_USER           CHAR(11),
	UPDATE_USER           CHAR(11) )
	IN GALTBSREF11 INDEX IN GALTBSIDX4 ;

COMMENT ON TABLE GALADM.QI_REPORTING_TARGET_TBX IS 'NAQ Reporting Target';

CREATE UNIQUE INDEX GALADM.QI_REPORTING_TARGET_I1
  ON GALADM.QI_REPORTING_TARGET_TBX (TARGET_ID);
  
CREATE INDEX GALADM.QI_REPORTING_TARGET_I2
  ON GALADM.QI_REPORTING_TARGET_TBX (PLANT, SITE, PRODUCT_TYPE);  
  
CREATE INDEX GALADM.QI_REPORTING_TARGET_I3
  ON GALADM.QI_REPORTING_TARGET_TBX (METRIC_NAME);    

ALTER TABLE GALADM.QI_REPORTING_TARGET_TBX 
	ADD CONSTRAINT QI_REPORTING_TARGET_PK PRIMARY KEY (TARGET_ID);
		
ALTER TABLE GALADM.QI_REPORTING_TARGET_TBX 
	ADD CONSTRAINT QI_REPORTING_TARGET_C1 CHECK 
		(CREATE_USER = UPPER(CREATE_USER));

ALTER TABLE GALADM.QI_REPORTING_TARGET_TBX  
	ADD CONSTRAINT QI_REPORTING_TARGET_C2 CHECK 
		(UPDATE_USER = UPPER(UPDATE_USER));
		
ALTER TABLE GALADM.QI_REPORTING_TARGET_TBX 
	ADD CONSTRAINT QI_REPORTING_TARGET_C3 CHECK 
		(SITE = UPPER(SITE));	
		
ALTER TABLE GALADM.QI_REPORTING_TARGET_TBX 
	ADD CONSTRAINT QI_REPORTING_TARGET_C4 CHECK 
		(PLANT = UPPER(PLANT));		

ALTER TABLE GALADM.QI_REPORTING_TARGET_TBX 
	ADD CONSTRAINT QI_REPORTING_TARGET_C5 CHECK 
		(METRIC_NAME = UPPER(METRIC_NAME));			

ALTER TABLE GALADM.QI_REPORTING_TARGET_TBX 
  DATA CAPTURE CHANGES
  PCTFREE 0
  LOCKSIZE ROW
  APPEND OFF
  NOT VOLATILE;

CREATE TRIGGER GALADM.QI_REPORTING_TARGET_TR1
  NO CASCADE BEFORE INSERT
  ON GALADM.QI_REPORTING_TARGET_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET CREATE_TIMESTAMP=CURRENT_TIMESTAMP;

CREATE TRIGGER GALADM.QI_REPORTING_TARGET_TR2
  NO CASCADE BEFORE UPDATE
  ON GALADM.QI_REPORTING_TARGET_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET UPDATE_TIMESTAMP=CURRENT_TIMESTAMP;
    