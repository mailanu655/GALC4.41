------------------------------------------------
-- DDL Statements for Table "GALADM  "."QI_LOCAL_DEFECT_COMBINATION_TBX"
------------------------------------------------

DROP TRIGGER GALADM.QI_LOCAL_DEFECT_COMBINATION_TR1;
DROP TRIGGER GALADM.QI_LOCAL_DEFECT_COMBINATION_TR2;
DROP TABLE GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX;

CREATE TABLE GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX
(
	LOCAL_DEFECT_COMBINATION_ID INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY 
		  (START WITH 1, INCREMENT BY 1, NO CACHE, NO MINVALUE, NO MAXVALUE, NO CYCLE, NO ORDER) ,	
	REGIONAL_DEFECT_COMBINATION_ID  INTEGER NOT NULL,
	ENTRY_SITE_NAME       CHARACTER(16),
	ENTRY_PLANT_NAME      CHARACTER(16),
	RESPONSIBLE_LEVEL_ID	INTEGER,
	PDDA_RESPONSIBILITY_ID  INTEGER,
	ENTRY_SCREEN          VARCHAR(40),
	TEXT_ENTRY_MENU       CHAR(18),
	REPAIR_METHOD         VARCHAR(64),
	REPAIR_METHOD_TIME    SMALLINT,
	ESTIMATED_TIME_TO_FIX  INTEGER,
	TEMPORARY_TRACKING    CHAR(18),
	ENGINE_FIRING_FLAG    SMALLINT NOT NULL  DEFAULT 0,
	REPAIR_AREA_NAME      CHAR(20),
	DEFECT_CATEGORY_NAME  VARCHAR(32),
	REPORTABLE			  SMALLINT,
	CREATE_TIMESTAMP      TIMESTAMP,
	UPDATE_TIMESTAMP      TIMESTAMP,
	CREATE_USER           CHAR(11),
	UPDATE_USER           CHAR(11) )
 	IN GALTBSREF11 INDEX IN GALTBSIDX4 ;

COMMENT ON TABLE GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX IS 'NAQ Local Defect Combination';

CREATE UNIQUE INDEX GALADM.QI_LOCAL_DEFECT_COMBINATION_I1
  ON GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX (LOCAL_DEFECT_COMBINATION_ID);
  
CREATE INDEX GALADM.QI_LOCAL_DEFECT_COMBINATION_I2
  ON GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX (REGIONAL_DEFECT_COMBINATION_ID);  
  
CREATE INDEX GALADM.QI_LOCAL_DEFECT_COMBINATION_I3
  ON GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX (ENTRY_SCREEN);  
  
CREATE INDEX GALADM.QI_LOCAL_DEFECT_COMBINATION_I4
  ON GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX (RESPONSIBLE_LEVEL_ID); 

ALTER TABLE GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX 
	ADD CONSTRAINT QI_LOCAL_DEFECT_COMBINATION_PK PRIMARY KEY (LOCAL_DEFECT_COMBINATION_ID);
	
ALTER TABLE GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX 
	ADD CONSTRAINT QI_LOCAL_DEFECT_COMBINATION_C1 CHECK 
		(ENTRY_SCREEN = UPPER(ENTRY_SCREEN));	
		
ALTER TABLE GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX 
	ADD CONSTRAINT QI_LOCAL_DEFECT_COMBINATION_C2 CHECK 
		(TEXT_ENTRY_MENU = UPPER(TEXT_ENTRY_MENU));	
				
ALTER TABLE GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX 
	ADD CONSTRAINT QI_LOCAL_DEFECT_COMBINATION_C3 CHECK 
		(CREATE_USER = UPPER(CREATE_USER));

ALTER TABLE GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX  
	ADD CONSTRAINT QI_LOCAL_DEFECT_COMBINATION_C4 CHECK 
		(UPDATE_USER = UPPER(UPDATE_USER));

ALTER TABLE GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX 
  DATA CAPTURE CHANGES
  PCTFREE 0
  LOCKSIZE ROW
  APPEND OFF
  NOT VOLATILE;

CREATE TRIGGER GALADM.QI_LOCAL_DEFECT_COMBINATION_TR1
  NO CASCADE BEFORE INSERT
  ON GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET CREATE_TIMESTAMP=CURRENT_TIMESTAMP;

CREATE TRIGGER GALADM.QI_LOCAL_DEFECT_COMBINATION_TR2
  NO CASCADE BEFORE UPDATE
  ON GALADM.QI_LOCAL_DEFECT_COMBINATION_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET UPDATE_TIMESTAMP=CURRENT_TIMESTAMP;
         
         
------------------------------------------------
-- DDL Statements for Table "GALADM  "."QI_PDDA_RESPONSIBILITY_TBX"
------------------------------------------------

DROP TRIGGER GALADM.QI_PDDA_RESPONSIBILITY_TR1;
DROP TRIGGER GALADM.QI_PDDA_RESPONSIBILITY_TR2;
DROP TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX;

CREATE TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX
(
	PDDA_RESPONSIBILITY_ID  INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY
		  (START WITH 1, INCREMENT BY 1, NO CACHE, NO MINVALUE, NO MAXVALUE, NO CYCLE, NO ORDER) ,
	RESPONSIBLE_LEVEL_ID  INTEGER NOT NULL ,
	MODEL_YEAR            CHAR(1),
	VEHICLE_MODEL_CODE    CHAR(3),
	PROCESS_NUMBER        CHAR(8),
	PROCESS_NAME          VARCHAR(32),	
	UNIT_NUMBER           CHAR(8),
	UNIT_DESC             VARCHAR(128),	
	PROD_SCH_QTY          INTEGER,
	UNIT_RANK             CHAR(3),
	SHORT_PLANT_CODE      CHAR(2),
	PCL_TO_QICS_SEQ_KEY   INTEGER,
	CREATE_TIMESTAMP      TIMESTAMP,
	UPDATE_TIMESTAMP      TIMESTAMP,
	CREATE_USER           CHAR(11),
	UPDATE_USER           CHAR(11) )
	IN GALTBSREF11 INDEX IN GALTBSIDX4 ;

COMMENT ON TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX IS 'NAQ PDDA Responsible';

CREATE UNIQUE INDEX GALADM.QI_PDDA_RESPONSIBILITY_I1
  ON GALADM.QI_PDDA_RESPONSIBILITY_TBX (PDDA_RESPONSIBILITY_ID);
  
CREATE INDEX GALADM.QI_PDDA_RESPONSIBILITY_I2
  ON GALADM.QI_PDDA_RESPONSIBILITY_TBX (RESPONSIBLE_LEVEL_ID);    

ALTER TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX 
	ADD CONSTRAINT QI_PDDA_RESPONSIBILITY_PK PRIMARY KEY (PDDA_RESPONSIBILITY_ID);
		
ALTER TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX 
	ADD CONSTRAINT QI_PDDA_RESPONSIBILITY_C1 CHECK 
		(CREATE_USER = UPPER(CREATE_USER));

ALTER TABLE GALADM.QI_PDDA_RESPONSIBILITY_TBX  
	ADD CONSTRAINT QI_PDDA_RESPONSIBILITY_C2 CHECK 
		(UPDATE_USER = UPPER(UPDATE_USER));

CREATE TRIGGER GALADM.QI_PDDA_RESPONSIBILITY_TR1
  NO CASCADE BEFORE INSERT
  ON GALADM.QI_PDDA_RESPONSIBILITY_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET CREATE_TIMESTAMP=CURRENT_TIMESTAMP;

CREATE TRIGGER GALADM.QI_PDDA_RESPONSIBILITY_TR2
  NO CASCADE BEFORE UPDATE
  ON GALADM.QI_PDDA_RESPONSIBILITY_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET UPDATE_TIMESTAMP=CURRENT_TIMESTAMP; 
  

------------------------------------------------
-- DDL Statements for Table "GALADM  "."QI_REPAIR_AREA_TBX"
------------------------------------------------

DROP TRIGGER GALADM.QI_REPAIR_AREA_TR1;
DROP TRIGGER GALADM.QI_REPAIR_AREA_TR2;
DROP TABLE GALADM.QI_REPAIR_AREA_TBX;

CREATE TABLE GALADM.QI_REPAIR_AREA_TBX
(

	REPAIR_AREA_NAME      VARCHAR(20) NOT NULL ,
	REPAIR_AREA_DESCRIPTION  VARCHAR(30),
	REPAIR_AREA_PLAN      INTEGER,
	REPAIR_AREA_PRIORITY  SMALLINT,
	ACTIVE                SMALLINT,
	DIVISION_ID           CHAR(16),
	CREATE_TIMESTAMP      TIMESTAMP,
	UPDATE_TIMESTAMP      TIMESTAMP,
	CREATE_USER           CHAR(11),
	UPDATE_USER           CHAR(11) )
 	IN GALTBSREF11 INDEX IN GALTBSIDX4 ;

COMMENT ON TABLE GALADM.QI_REPAIR_AREA_TBX IS 'NAQ Repair Area';

CREATE UNIQUE INDEX GALADM.QI_REPAIR_AREA_I1
  ON GALADM.QI_REPAIR_AREA_TBX (REPAIR_AREA_NAME);

CREATE INDEX GALADM.QI_REPAIR_AREA_I2
  ON GALADM.QI_REPAIR_AREA_TBX (DIVISION_ID);

ALTER TABLE GALADM.QI_REPAIR_AREA_TBX 
	ADD CONSTRAINT QI_REPAIR_AREA_PK PRIMARY KEY (REPAIR_AREA_NAME);
	
ALTER TABLE GALADM.QI_REPAIR_AREA_TBX 
	ADD CONSTRAINT QI_REPAIR_AREA_C1 CHECK 
		(CREATE_USER = UPPER(CREATE_USER));

ALTER TABLE GALADM.QI_REPAIR_AREA_TBX  
	ADD CONSTRAINT QI_REPAIR_AREA_C2 CHECK 
		(UPDATE_USER = UPPER(UPDATE_USER));

ALTER TABLE GALADM.QI_REPAIR_AREA_TBX 
  DATA CAPTURE CHANGES
  PCTFREE 0
  LOCKSIZE ROW
  APPEND OFF
  NOT VOLATILE;

CREATE TRIGGER GALADM.QI_REPAIR_AREA_TR1
  NO CASCADE BEFORE INSERT
  ON GALADM.QI_REPAIR_AREA_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET CREATE_TIMESTAMP=CURRENT_TIMESTAMP;

CREATE TRIGGER GALADM.QI_REPAIR_AREA_TR2
  NO CASCADE BEFORE UPDATE
  ON GALADM.QI_REPAIR_AREA_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET UPDATE_TIMESTAMP=CURRENT_TIMESTAMP;
  
  
------------------------------------------------
-- DDL Statements for Table "GALADM  "."QI_TEMPORARY_TRACKING_TBX"
------------------------------------------------

DROP TRIGGER GALADM.QI_TEMPORARY_TRACKING_TR1;
DROP TRIGGER GALADM.QI_TEMPORARY_TRACKING_TR2;
DROP TABLE GALADM.QI_TEMPORARY_TRACKING_TBX;

CREATE TABLE GALADM.QI_TEMPORARY_TRACKING_TBX
(
	TEMPORARY_TRACKING    CHAR(18) NOT NULL ,
	ACTIVE                SMALLINT,	
	CREATE_TIMESTAMP      TIMESTAMP,
	UPDATE_TIMESTAMP      TIMESTAMP,
	CREATE_USER           CHAR(11),
	UPDATE_USER           CHAR(11) )
	IN GALTBSREF11 INDEX IN GALTBSIDX4 ;

COMMENT ON TABLE GALADM.QI_TEMPORARY_TRACKING_TBX IS 'NAQ Temporary Tracking';

CREATE UNIQUE INDEX GALADM.QI_TEMPORARY_TRACKING_I1
  ON GALADM.QI_TEMPORARY_TRACKING_TBX (TEMPORARY_TRACKING);

ALTER TABLE GALADM.QI_TEMPORARY_TRACKING_TBX 
	ADD CONSTRAINT QI_TEMPORARY_TRACKING_PK PRIMARY KEY (TEMPORARY_TRACKING);
		
ALTER TABLE GALADM.QI_TEMPORARY_TRACKING_TBX 
	ADD CONSTRAINT QI_TEMPORARY_TRACKING_C1 CHECK 
		(CREATE_USER = UPPER(CREATE_USER));

ALTER TABLE GALADM.QI_TEMPORARY_TRACKING_TBX  
	ADD CONSTRAINT QI_TEMPORARY_TRACKING_C2 CHECK 
		(UPDATE_USER = UPPER(UPDATE_USER));

CREATE TRIGGER GALADM.QI_TEMPORARY_TRACKING_TR1
  NO CASCADE BEFORE INSERT
  ON GALADM.QI_TEMPORARY_TRACKING_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET CREATE_TIMESTAMP=CURRENT_TIMESTAMP;

CREATE TRIGGER GALADM.QI_TEMPORARY_TRACKING_TR2
  NO CASCADE BEFORE UPDATE
  ON GALADM.QI_TEMPORARY_TRACKING_TBX
  REFERENCING NEW AS A
  FOR EACH ROW
  SET UPDATE_TIMESTAMP=CURRENT_TIMESTAMP;                   