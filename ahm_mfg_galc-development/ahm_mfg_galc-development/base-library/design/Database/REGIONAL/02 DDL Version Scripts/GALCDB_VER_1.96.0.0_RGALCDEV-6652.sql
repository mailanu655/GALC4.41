ALTER TABLE GALADM.PART_SPEC_TBX DATA CAPTURE NONE; 
ALTER TABLE GALADM.PART_SPEC_TBX DROP COLUMN IMAGE;
ALTER TABLE GALADM.PART_SPEC_TBX ADD IMAGE_ID INTEGER;
ALTER TABLE GALADM.PART_SPEC_TBX DATA CAPTURE CHANGES; 
REORG TABLE GALADM.PART_SPEC_TBX;

------------------------------------------------
-- DDL Statements for Table GALADM.DATA_COLLECTION_IMAGE_TBX
------------------------------------------------

DROP TRIGGER GALADM.DATA_COLLECTION_IMAGE_TR2;
DROP TRIGGER GALADM.DATA_COLLECTION_IMAGE_TR1;
DROP TABLE GALADM.DATA_COLLECTION_IMAGE_TBX;

CREATE TABLE GALADM.DATA_COLLECTION_IMAGE_TBX (
	IMAGE_ID INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY 
		  (START WITH 1, INCREMENT BY 1, NO CACHE, NO MINVALUE, NO MAXVALUE, NO CYCLE, NO ORDER),
	IMAGE_NAME VARCHAR(32) NOT NULL DEFAULT '', 
	IMAGE_DESCRIPTION VARCHAR(64),
	INFORMATION VARCHAR(256),
	IMAGE_DATA BLOB(5M),
	ACTIVE SMALLINT,
	CREATE_TIMESTAMP TIMESTAMP, 
	UPDATE_TIMESTAMP TIMESTAMP
)
IN GALTBS8K1
INDEX IN GALTBSIDX4;

ALTER TABLE GALADM.DATA_COLLECTION_IMAGE_TBX
  DATA CAPTURE CHANGES
  PCTFREE 0
  LOCKSIZE ROW
  APPEND OFF
  NOT VOLATILE;
  
ALTER TABLE GALADM.DATA_COLLECTION_IMAGE_TBX 
  ADD CONSTRAINT DATA_COLLECTIOIN_IMAGE_PK PRIMARY KEY (IMAGE_ID);
  
COMMENT ON TABLE GALADM.DATA_COLLECTION_IMAGE_TBX IS
   'RMT images for data collection';
 
CREATE TRIGGER GALADM.DATA_COLLECTION_IMAGE_TR1
   NO CASCADE BEFORE INSERT
   ON GALADM.DATA_COLLECTION_IMAGE_TBX
   REFERENCING NEW AS A
   FOR EACH ROW
SET CREATE_TIMESTAMP = CURRENT_TIMESTAMP;

CREATE TRIGGER GALADM.DATA_COLLECTION_IMAGE_TR2
   NO CASCADE BEFORE UPDATE
   ON GALADM.DATA_COLLECTION_IMAGE_TBX
   REFERENCING NEW AS A
   FOR EACH ROW
SET UPDATE_TIMESTAMP = CURRENT_TIMESTAMP;
  
