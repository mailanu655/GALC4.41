CREATE TABLE GALADM.PART_SHIPMENT_TBX (
  SHIPMENT_ID	BIGINT	NOT NULL	GENERATED BY DEFAULT
    AS IDENTITY (START WITH 1, INCREMENT BY 1, NO CACHE,
       NO MINVALUE, NO MAXVALUE, NO CYCLE, NO ORDER),
  RECEIVING_SITE	CHARACTER(10)	NOT NULL,
  TRAILER_NUMBER	CHARACTER(20),
  ACTUAL_TIMESTAMP	TIMESTAMP	NOT NULL,
  SEND_STATUS	INTEGER	NOT NULL,
  SENT_TIMESTAMP	TIMESTAMP,
  CREATE_TIMESTAMP	TIMESTAMP	NOT NULL,
  UPDATE_TIMESTAMP	TIMESTAMP	NOT NULL
  ) ;
  
ALTER TABLE GALADM.PART_SHIPMENT_TBX
  ADD CONSTRAINT PART_SHIPMENT_PK PRIMARY KEY
    (SHIPMENT_ID);

CREATE TRIGGER GALADM.PART_SHIPMENT_TR1
   NO CASCADE BEFORE INSERT
   ON GALADM.PART_SHIPMENT_TBX
   REFERENCING NEW AS A
   FOR EACH ROW
SET CREATE_TIMESTAMP = CURRENT_TIMESTAMP;

CREATE TRIGGER GALADM.PART_SHIPMENT_TR2
   NO CASCADE BEFORE UPDATE
   ON GALADM.PART_SHIPMENT_TBX
   REFERENCING NEW AS A
   FOR EACH ROW
SET UPDATE_TIMESTAMP = CURRENT_TIMESTAMP;
  
CREATE TABLE GALADM.PART_SHIPMENT_PRODUCTS_TBX (
  SHIPMENT_ID	INTEGER	NOT NULL,
  PRODUCT_ID	CHARACTER(17)	NOT NULL,
  CREATE_TIMESTAMP	TIMESTAMP	NOT NULL,
  UPDATE_TIMESTAMP	TIMESTAMP	NOT NULL,
  BUILD_STATUS	INTEGER
  )IN GALTBSDAT9 INDEX IN GALTBSIDX3;
  
ALTER TABLE GALADM.PART_SHIPMENT_PRODUCTS_TBX
  ADD CONSTRAINT PART_SHIPMENT_PK PRIMARY KEY
    (SHIPMENT_ID, PRODUCT_ID);

CREATE TRIGGER GALADM.PART_SHIPMENT_PRODUCTS_TR1
   NO CASCADE BEFORE INSERT
   ON GALADM.PART_SHIPMENT_PRODUCTS_TBX
   REFERENCING NEW AS A
   FOR EACH ROW
SET CREATE_TIMESTAMP = CURRENT_TIMESTAMP;

CREATE TRIGGER GALADM.PART_SHIPMENT_PRODUCTS_TR2
   NO CASCADE BEFORE UPDATE
   ON GALADM.PART_SHIPMENT_PRODUCTS_TBX
   REFERENCING NEW AS A
   FOR EACH ROW
SET UPDATE_TIMESTAMP = CURRENT_TIMESTAMP;

alter table GALADM.MBPN_PRODUCT_TBX add column EXTERNAL_BUILD INTEGER NOT NULL default 0;