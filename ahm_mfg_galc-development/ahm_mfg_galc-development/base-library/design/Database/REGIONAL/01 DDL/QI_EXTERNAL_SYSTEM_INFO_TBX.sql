
------------------------------------------------
-- DDL Statements for Table "GALADM"."QI_EXTERNAL_SYSTEM_DEFECT_ID_TBX"
------------------------------------------------
 
DROP TABLE "GALADM"."QI_EXTERNAL_SYSTEM_INFO_TBX";


CREATE TABLE "GALADM"."QI_EXTERNAL_SYSTEM_INFO_TBX"  (
		  "EXTERNAL_SYSTEM_ID" SMALLINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (  
		    START WITH +1  
		    INCREMENT BY +1  
		    MINVALUE +1  
		    NO CYCLE  
		    CACHE 20  
		    NO ORDER ) , 
		  "EXTERNAL_SYSTEM_NAME" VARCHAR(255) , 
		  "EXTERNAL_SYSTEM_DESC" VARCHAR(255) , 
		  "DEVICE_NAME" VARCHAR(255) , 
		  "EXTERNAL_SYSTEM_NOTIFICATION" VARCHAR(255) , 
		  "CREATE_USER" CHAR(11) , 
		  "UPDATE_USER" CHAR(11) , 
		  "CREATE_TIMESTAMP" TIMESTAMP ,  
		  "UPDATE_TIMESTAMP" TIMESTAMP)   
		 IN "GALTBSREF11" INDEX IN "GALTBSIDX4"  
		 ORGANIZE BY ROW; 

COMMENT ON TABLE "GALADM"."QI_EXTERNAL_SYSTEM_INFO_TBX" IS 'Qics external system details';


-- DDL Statements for Primary Key on Table "GALADM"."QI_EXTERNAL_SYSTEM_INFO_TBX"

ALTER TABLE "GALADM"."QI_EXTERNAL_SYSTEM_INFO_TBX" 
	ADD CONSTRAINT "QI_EXTERNAL_SYSTEM_INFO_TBX_PK" PRIMARY KEY
		("EXTERNAL_SYSTEM_ID");


-------------------------------
-- DDL Statements for Triggers
-------------------------------


SET SYSIBM.NLS_STRING_UNITS = 'SYSTEM';
SET CURRENT SCHEMA = "GALADM";
SET CURRENT PATH = "SYSIBM","SYSFUN","SYSPROC","SYSIBMADM","GALADM";

DROP TRIGGER "GALADM"."QI_EXTERNAL_SYSTEM_INFO_TR1";

CREATE TRIGGER GALADM.QI_EXTERNAL_SYSTEM_INFO_TR1
   NO CASCADE BEFORE INSERT
   ON GALADM.QI_EXTERNAL_SYSTEM_INFO_TBX
   REFERENCING NEW AS A
   FOR EACH ROW
SET CREATE_TIMESTAMP = CURRENT_TIMESTAMP;


SET SYSIBM.NLS_STRING_UNITS = 'SYSTEM';
SET CURRENT SCHEMA = "GALADM";
SET CURRENT PATH = "SYSIBM","SYSFUN","SYSPROC","SYSIBMADM","GALADM";

DROP TRIGGER "GALADM"."QI_EXTERNAL_SYSTEM_INFO_TR2";

CREATE TRIGGER GALADM.QI_EXTERNAL_SYSTEM_INFO_TR2
  NO CASCADE BEFORE UPDATE
  ON GALADM.QI_EXTERNAL_SYSTEM_INFO_TBX
  REFERENCING 
    NEW AS A
  FOR EACH ROW
SET UPDATE_TIMESTAMP=CURRENT_TIMESTAMP;


