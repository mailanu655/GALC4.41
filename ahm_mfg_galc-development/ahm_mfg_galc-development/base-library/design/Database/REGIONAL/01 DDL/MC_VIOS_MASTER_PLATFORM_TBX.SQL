
------------------------------------------------
-- DDL Statements for Table "GALADM  "."MC_VIOS_MASTER_PLATFORM_TBX"
------------------------------------------------
 
DROP TABLE "GALADM  "."MC_VIOS_MASTER_PLATFORM_TBX";


CREATE TABLE "GALADM  "."MC_VIOS_MASTER_PLATFORM_TBX"  (
		  "VIOS_PLATFORM_ID" CHAR(17 OCTETS) NOT NULL , 
		  "PLANT_LOC_CODE" CHAR(1 OCTETS) NOT NULL , 
		  "DEPT_CODE" CHAR(2 OCTETS) NOT NULL , 
		  "MODEL_YEAR_DATE" DECIMAL(5,1) NOT NULL , 
		  "PROD_SCH_QTY" DECIMAL(5,1) NOT NULL , 
		  "PROD_ASM_LINE_NO" CHAR(1 OCTETS) NOT NULL , 
		  "VEHICLE_MODEL_CODE" CHAR(1 OCTETS) NOT NULL ,
		  "ACTIVE" SMALLINT WITH DEFAULT 1,
		  "DISCARD_YEAR" SMALLINT WITH DEFAULT 0,
		  "USER_ID" CHAR(11) NOT NULL WITH DEFAULT '',
		  "CREATE_TIMESTAMP" TIMESTAMP , 
		  "UPDATE_TIMESTAMP" TIMESTAMP
		  )   
		 DATA CAPTURE CHANGES  
		 IN "GALTBSREF12" INDEX IN "GALTBSIDX4"  
		 ORGANIZE BY ROW; 

ALTER TABLE "GALADM  "."MC_VIOS_MASTER_PLATFORM_TBX" PCTFREE 0;

COMMENT ON TABLE "GALADM  "."MC_VIOS_MASTER_PLATFORM_TBX" IS 'RMT MC_VIOS_MASTER_PLATFORM is used by Manufacturing Control to create master of PDDA platform that is Plant Loc Code, Dept Code, Model Year Date, Prod Sch Qty, Prod ASM Line No, Vehicle Model Code';


-- DDL Statements for Primary Key on Table "GALADM  "."MC_VIOS_MASTER_PLATFORM_TBX"

ALTER TABLE "GALADM  "."MC_VIOS_MASTER_PLATFORM_TBX" 
	ADD CONSTRAINT "MC_VIOS_MASTER_PLATFORM_PK" PRIMARY KEY
		("VIOS_PLATFORM_ID");



-- DDL Statements for Indexes on Table "GALADM  "."MC_VIOS_MASTER_PLATFORM_TBX"

SET SYSIBM.NLS_STRING_UNITS = 'SYSTEM';

CREATE UNIQUE INDEX "GALADM  "."MC_VIOS_MASTER_PLATFORM_I1" ON "GALADM  "."MC_VIOS_MASTER_PLATFORM_TBX" 
		("PLANT_LOC_CODE" ASC,
		 "DEPT_CODE" ASC,
		 "MODEL_YEAR_DATE" ASC,
		 "PROD_SCH_QTY" ASC,
		 "PROD_ASM_LINE_NO" ASC,
		 "VEHICLE_MODEL_CODE" ASC)
		
		COMPRESS NO 
		INCLUDE NULL KEYS ALLOW REVERSE SCANS;






-------------------------------
-- DDL Statements for Triggers
-------------------------------


SET SYSIBM.NLS_STRING_UNITS = 'SYSTEM';
SET CURRENT SCHEMA = "GALINST ";
SET CURRENT PATH = "SYSIBM","SYSFUN","SYSPROC","SYSIBMADM","GALINST";

DROP TRIGGER "GALADM  "."MC_VIOS_MASTER_PLATFORM_TR1";

CREATE TRIGGER GALADM.MC_VIOS_MASTER_PLATFORM_TR1
  NO CASCADE BEFORE INSERT
  ON GALADM.MC_VIOS_MASTER_PLATFORM_TBX
  REFERENCING 
    NEW AS A
  FOR EACH ROW
SET CREATE_TIMESTAMP=CURRENT_TIMESTAMP;


SET SYSIBM.NLS_STRING_UNITS = 'SYSTEM';
SET CURRENT SCHEMA = "GALINST ";
SET CURRENT PATH = "SYSIBM","SYSFUN","SYSPROC","SYSIBMADM","GALINST";

DROP TRIGGER "GALADM  "."MC_VIOS_MASTER_PLATFORM_TR2";

CREATE TRIGGER GALADM.MC_VIOS_MASTER_PLATFORM_TR2
  NO CASCADE BEFORE UPDATE
  ON GALADM.MC_VIOS_MASTER_PLATFORM_TBX
  REFERENCING 
    NEW AS A
  FOR EACH ROW
SET UPDATE_TIMESTAMP=CURRENT_TIMESTAMP;

