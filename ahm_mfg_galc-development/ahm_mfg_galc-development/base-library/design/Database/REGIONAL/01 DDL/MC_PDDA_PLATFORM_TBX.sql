
------------------------------------------------
-- DDL Statements for Table "GALADM  "."MC_PDDA_PLATFORM_TBX"
------------------------------------------------
 
DROP TABLE "GALADM  "."MC_PDDA_PLATFORM_TBX";


CREATE TABLE "GALADM  "."MC_PDDA_PLATFORM_TBX"  (
		  "PDDA_PLATFORM_ID" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (  
		    START WITH +0  
		    INCREMENT BY +1  
		    MINVALUE +0  
		    MAXVALUE +2147483647  
		    NO CYCLE  
		    NO CACHE  
		    NO ORDER ) , 
		  "PLANT_LOC_CODE" CHAR(1 OCTETS) NOT NULL , 
		  "DEPT_CODE" CHAR(2 OCTETS) NOT NULL , 
		  "MODEL_YEAR_DATE" DECIMAL(5,1) NOT NULL , 
		  "PROD_SCH_QTY" DECIMAL(5,1) NOT NULL , 
		  "PROD_ASM_LINE_NO" CHAR(1 OCTETS) NOT NULL , 
		  "VEHICLE_MODEL_CODE" CHAR(1 OCTETS) NOT NULL , 
		  "ASM_PROC_NO" VARCHAR(5 OCTETS) NOT NULL , 
		  "REV_ID" BIGINT NOT NULL , 
		  "APPROVER_NO" CHAR(11 OCTETS) , 
		  "APPROVED" TIMESTAMP , 
		  "DEPRECATED_REV_ID" BIGINT , 
		  "DEPRECATER_NO" CHAR(11 OCTETS) , 
		  "DEPRECATED" TIMESTAMP , 
		  "CREATE_TIMESTAMP" TIMESTAMP , 
		  "UPDATE_TIMESTAMP" TIMESTAMP )   
		 DATA CAPTURE CHANGES  
		 IN "GALTBSREF12" INDEX IN "GALTBSIDX4"  
		 ORGANIZE BY ROW; 

COMMENT ON TABLE "GALADM  "."MC_PDDA_PLATFORM_TBX" IS 'RMT MC_PDDA_PLATFORM is used by Manufacturing Control to link PDDA Plant Loc Code, Dept Code, Model Year Date, Prod Sch Qty, Prod ASM Line No, Vehicle Model Code, ASM Proc No to GALC Process Point ID';


-- DDL Statements for Primary Key on Table "GALADM  "."MC_PDDA_PLATFORM_TBX"

ALTER TABLE "GALADM  "."MC_PDDA_PLATFORM_TBX" 
	ADD CONSTRAINT "MC_PDDA_PLATFORM_PK" PRIMARY KEY
		("PDDA_PLATFORM_ID");



-- DDL Statements for Indexes on Table "GALADM  "."MC_PDDA_PLATFORM_TBX"

SET SYSIBM.NLS_STRING_UNITS = 'SYSTEM';

CREATE UNIQUE INDEX "GALADM  "."MC_PDDA_PLATFORM_I1" ON "GALADM  "."MC_PDDA_PLATFORM_TBX" 
		("PLANT_LOC_CODE" ASC,
		 "DEPT_CODE" ASC,
		 "MODEL_YEAR_DATE" ASC,
		 "PROD_SCH_QTY" ASC,
		 "PROD_ASM_LINE_NO" ASC,
		 "VEHICLE_MODEL_CODE" ASC,
		 "ASM_PROC_NO" ASC,
		 "REV_ID" ASC)
		
		COMPRESS NO 
		INCLUDE NULL KEYS ALLOW REVERSE SCANS;






-------------------------------
-- DDL Statements for Triggers
-------------------------------


SET SYSIBM.NLS_STRING_UNITS = 'SYSTEM';
SET CURRENT SCHEMA = "GALINST ";
SET CURRENT PATH = "SYSIBM","SYSFUN","SYSPROC","SYSIBMADM","GALINST";

DROP TRIGGER "GALADM  "."MC_PDDA_PLATFORM_TR1";

CREATE TRIGGER GALADM.MC_PDDA_PLATFORM_TR1 NO CASCADE BEFORE INSERT ON GALADM.MC_PDDA_PLATFORM_TBX
REFERENCING NEW AS A FOR EACH ROW SET CREATE_TIMESTAMP = CURRENT_TIMESTAMP;


SET SYSIBM.NLS_STRING_UNITS = 'SYSTEM';
SET CURRENT SCHEMA = "GALINST ";
SET CURRENT PATH = "SYSIBM","SYSFUN","SYSPROC","SYSIBMADM","GALINST";

DROP TRIGGER "GALADM  "."MC_PDDA_PLATFORM_TR2";

CREATE TRIGGER GALADM.MC_PDDA_PLATFORM_TR2 NO CASCADE BEFORE UPDATE ON GALADM.MC_PDDA_PLATFORM_TBX
REFERENCING NEW AS A FOR EACH ROW SET UPDATE_TIMESTAMP = CURRENT_TIMESTAMP;

-- Drop PROCESS_POINT_ID, PROCESS_SEQ_NUM columns from MC_PDDA_PLATFORM_TBX
ALTER TABLE GALADM.MC_PDDA_PLATFORM_TBX DROP COLUMN PROCESS_POINT_ID DROP COLUMN PROCESS_SEQ_NUM;

--DROP Column REORG required
REORG TABLE GALADM.MC_PDDA_PLATFORM_TBX;