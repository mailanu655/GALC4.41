# Spring Application Context and Component Relationships

## Spring Context Initialization Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 LCSalesInterfaceApplication.java                                    │
│                                 (Application Entry Point)                                           │
│                                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────────────────┘
                                               │
                                               ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 SpringApplication.run()                                             │
│                                 (Bootstrap Spring Application)                                      │
│                                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────────────────┘
                                               │
                                               ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 Load application.properties                                         │
│                                 Load application.yml                                                │
│                                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────────────────┘
                                               │
                                               ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 Component Scanning                                                  │
│                                 (Find and register all components)                                  │
│                                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────────────────┘
                                               │
                                               ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 Dependency Injection                                                │
│                                 (Wire components together)                                          │
│                                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────────────────┘
                                               │
                                               ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 Initialize JMS Connection                                           │
│                                 (Connect to IBM MQ)                                                 │
│                                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────────────────┘
                                               │
                                               ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 Start Scheduled Tasks                                               │
│                                 (Initialize schedulers)                                             │
│                                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────────────────┘
                                               │
                                               ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 Start Web Server                                                    │
│                                 (Listen for HTTP requests)                                          │
│                                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

## Component Relationships Enabled by Annotations

### @SpringBootApplication
Enables auto-configuration and component scanning, which discovers and registers:

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 @SpringBootApplication                                              │
│                                                                                                     │
└───────────────────────────────────────────────┬─────────────────────────────────────────────────────┘
                                                │
                    ┌───────────────────────────┼───────────────────────────┐
                    │                           │                           │
                    ▼                           ▼                           ▼
┌───────────────────────────┐     ┌───────────────────────────┐   ┌───────────────────────────┐
│                           │     │                           │   │                           │
│     @Configuration        │     │  @EnableAutoConfiguration │   │      @ComponentScan       │
│                           │     │                           │   │                           │
└───────────────────────────┘     └───────────────────────────┘   └───────────────────────────┘
```

### @EnableJms
Enables JMS messaging capabilities, which initializes:

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                        @EnableJms                                                   │
│                                                                                                     │
└───────────────────────────────────────────────┬─────────────────────────────────────────────────────┘
                                                │
                    ┌───────────────────────────┼───────────────────────────┐
                    │                           │                           │
                    ▼                           ▼                           ▼
┌───────────────────────────┐     ┌───────────────────────────┐   ┌───────────────────────────┐
│                           │     │                           │   │                           │
│   JmsListenerEndpoint     │     │    JmsTemplate            │   │   ConnectionFactory       │
│   Container Factory       │     │    (For sending messages) │   │   (IBM MQ connection)     │
│                           │     │                           │   │                           │
└───────────────────────────┘     └───────────────────────────┘   └───────────────────────────┘
```

### @EnableScheduling
Enables scheduled tasks, which initializes:

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                     @EnableScheduling                                               │
│                                                                                                     │
└───────────────────────────────────────────────┬─────────────────────────────────────────────────────┘
                                                │
                                                │
                                                ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 ScheduledAnnotationBeanPostProcessor                                │
│                                 (Processes @Scheduled annotations)                                  │
│                                                                                                     │
└───────────────────────────────────────────────┬─────────────────────────────────────────────────────┘
                                                │
                    ┌───────────────────────────┼───────────────────────────┐
                    │                           │                           │
                    ▼                           ▼                           ▼
┌───────────────────────────┐     ┌───────────────────────────┐   ┌───────────────────────────┐
│                           │     │                           │   │                           │
│  ShippingMessageScheduler │     │  StatusMessageScheduler   │   │  Other @Scheduled methods │
│  (cron expression from    │     │  (cron expression from    │   │                           │
│   properties)             │     │   properties)             │   │                           │
└───────────────────────────┘     └───────────────────────────┘   └───────────────────────────┘
```

### @EnableCaching
Enables caching capabilities, which initializes:

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                       @EnableCaching                                                │
│                                                                                                     │
└───────────────────────────────────────────────┬─────────────────────────────────────────────────────┘
                                                │
                                                │
                                                ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 CacheManager                                                        │
│                                 (Manages cache regions)                                             │
│                                                                                                     │
└───────────────────────────────────────────────┬─────────────────────────────────────────────────────┘
                                                │
                    ┌───────────────────────────┼───────────────────────────┐
                    │                           │                           │
                    ▼                           ▼                           ▼
┌───────────────────────────┐     ┌───────────────────────────┐   ┌───────────────────────────┐
│                           │     │                           │   │                           │
│     @Cacheable methods    │     │     @CacheEvict methods   │   │    @CachePut methods      │
│     (Store results)       │     │     (Clear cache)         │   │    (Update cache)         │
│                           │     │                           │   │                           │
└───────────────────────────┘     └───────────────────────────┘   └───────────────────────────┘
```

## Bean Dependency Graph

The following diagram shows how the main components are wired together through dependency injection:

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 LCSalesInterfaceController                                          │
│                                                                                                     │
└───────────────────────────────────────────────┬─────────────────────────────────────────────────────┘
                                                │
                    ┌───────────────────────────┼───────────────────────────┐
                    │                           │                           │
                    ▼                           ▼                           ▼
┌───────────────────────────┐     ┌───────────────────────────┐   ┌───────────────────────────┐
│                           │     │                           │   │                           │
│   PropertyUtil            │     │   IQueueManagerService    │   │   ShippingStatusService   │
│                           │     │                           │   │                           │
└───────────────────────────┘     └───────────────────────────┘   └───────────────────────────┘
                                                │                               │
                                                │                               │
                                                ▼                               ▼
                                  ┌───────────────────────────┐   ┌───────────────────────────┐
                                  │                           │   │                           │
                                  │   ShippingTransactionTask │   │ ShippingTransactionService│
                                  │                           │   │                           │
                                  └───────────────────────────┘   └───────────────────────────┘
                                                │
                                                │
                                                ▼
                                  ┌───────────────────────────┐
                                  │                           │
                                  │   ReceivingTransactionTask│
                                  │                           │
                                  └───────────────────────────┘
                                                │
                                                │
                                                ▼
                                  ┌───────────────────────────┐
                                  │                           │
                                  │ StatusMessageHandlerFactory│
                                  │                           │
                                  └───────────────────────────┘
                                                │
                    ┌───────────────────────────┼───────────────────────────┐
                    │                           │                           │
                    ▼                           ▼                           ▼
┌───────────────────────────┐     ┌───────────────────────────┐   ┌───────────────────────────┐
│                           │     │                           │   │                           │
│  AhReceiveMessageHandler  │     │  DealerAssignMessageHandler│  │  Other Message Handlers   │
│                           │     │                           │   │                           │
└───────────────────────────┘     └───────────────────────────┘   └───────────────────────────┘
```

## Configuration Properties Impact

The application.properties file contains configuration that affects how components initialized by the entry point behave:

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                     │
│                                 application.properties                                              │
│                                                                                                     │
└───────────────────────────────────────────────┬─────────────────────────────────────────────────────┘
                                                │
        ┌───────────────────────────────────────┼───────────────────────────────────────────┐
        │                                       │                                           │
        ▼                                       ▼                                           ▼
┌───────────────────────────┐     ┌───────────────────────────┐               ┌───────────────────────────┐
│                           │     │                           │               │                           │
│  IBM MQ Configuration     │     │  Scheduler Configuration  │               │  GALC API Configuration   │
│  - ibm.mq.queueManager    │     │  - ship.scheduledTasks.   │               │  - lc.url                 │
│  - ibm.mq.channel         │     │    cron.expression        │               │  - lc.tracking.url        │
│  - ibm.mq.connName        │     │  - status.scheduledTasks. │               │  - lc.findbykey.method    │
│  - ibm.mq.user            │     │    cron.expression        │               │  - lc.save.method         │
│                           │     │                           │               │                           │
└───────────────┬───────────┘     └───────────────┬───────────┘               └───────────────┬───────────┘
                │                                 │                                           │
                ▼                                 ▼                                           ▼
┌───────────────────────────┐     ┌───────────────────────────┐               ┌───────────────────────────┐
│                           │     │                           │               │                           │
│  QueueManagerService      │     │  ShippingMessageScheduler │               │  ShippingStatusService    │
│  (Uses MQ config)         │     │  StatusMessageScheduler    │               │  (Uses GALC API config)   │
│                           │     │  (Use cron expressions)   │               │                           │
└───────────────────────────┘     └───────────────────────────┘               └───────────────────────────┘
```

This diagram shows how the configuration properties loaded during application startup affect the behavior of various components in the system.