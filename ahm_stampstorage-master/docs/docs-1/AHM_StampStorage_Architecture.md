# AHM Stamp Storage System Architecture

## System Architecture Diagram

```
+----------------------------------------------------------------------------------------------+
|                                       Client Layer                                           |
+----------------------------------------------------------------------------------------------+
|                                                                                              |
|  +-----------------+            +--------------------+            +--------------------+     |
|  |  Web Browser    |            |  Administrative    |            |  Monitoring        |     |
|  |  Interface      |            |  Console           |            |  Stations          |     |
|  +-----------------+            +--------------------+            +--------------------+     |
|          ▲                               ▲                                ▲                  |
+----------|-------------------------------|---------------------------------|------------------+
           |                               |                                 |
           ▼                               ▼                                 ▼
+----------------------------------------------------------------------------------------------+
|                                     Presentation Layer                                       |
+----------------------------------------------------------------------------------------------+
|                                                                                              |
|  +------------------+            +--------------------+           +---------------------+    |
|  |  Web Controllers |            |  JSP Views         |           |  Storage State UI   |    |
|  +------------------+            +--------------------+           +---------------------+    |
|          |                                |                                 |                |
+----------|--------------------------------|------------------- -------------|----------------+
           |                                |                                 |
           ▼                                ▼                                 ▼
+----------------------------------------------------------------------------------------------+
|                                     Service Layer                                            |
+----------------------------------------------------------------------------------------------+
|                                                                                              |
|  +---------------------+     +---------------------+     +------------------------+          |
|  | StampStorageService |     | OrderFulfillment    |     | StorageState          |          |
|  |                     |     | Service             |     | Management            |          |
|  +---------------------+     +---------------------+     +------------------------+          |
|             |                          |                             |                       |
|             |                          |                             |                       |
|  +---------------------+     +---------------------+     +------------------------+          |
|  | Alarm Management    |     | Empty Carrier       |     | Carrier Routing       |          |
|  | Service             |     | Management          |     | Logic                 |          |
|  +---------------------+     +---------------------+     +------------------------+          |
|                                                                                              |
+----------------------------------------------------------------------------------------------+
                |                          |                             |
                ▼                          ▼                             ▼
+----------------------------------------------------------------------------------------------+
|                                     Domain Layer                                             |
+----------------------------------------------------------------------------------------------+
|                                                                                              |
|  +---------------+    +---------------+    +---------------+    +---------------+            |
|  | Carrier       |    | Storage Lane  |    | Weld Order    |    | Die           |            |
|  +---------------+    +---------------+    +---------------+    +---------------+            |
|                                                                                              |
|  +---------------+    +---------------+    +---------------+    +---------------+            |
|  | Stop          |    | Alarm         |    | Model         |    | Order Manager |            |
|  +---------------+    +---------------+    +---------------+    +---------------+            |
|                                                                                              |
+----------------------------------------------------------------------------------------------+
                |                          |                             |
                ▼                          ▼                             ▼
+----------------------------------------------------------------------------------------------+
|                                     Data Access Layer                                        |
+----------------------------------------------------------------------------------------------+
|                                                                                              |
|  +---------------------+     +---------------------+     +------------------------+          |
|  | Hibernate Entities  |     | JPA Repositories    |     | Custom DAO Layer       |          |
|  +---------------------+     +---------------------+     +------------------------+          |
|                                                                                              |
+---------------------------|--------------------------|-----------------------------------+
                            |                          |
                            ▼                          ▼
          +---------------------------+      +---------------------------+
          |        Database           |      |      Message Queue        |
          |  (STAMPSTOR schema)       |      |                           |
          +---------------------------+      +---------------------------+
                                                          |
                                                          |
+----------------------------------------------------------------------------------------------+
|                                 Integration Layer                                            |
+----------------------------------------------------------------------------------------------+
|                                                                                              |
|  +---------------------+     +---------------------+     +------------------------+          |
|  | MES Interface       |     | PLC Communication   |     | RFID Integration       |          |
|  | (JSON)              |     | (OMRON FINS)        |     | Module                 |          |
|  +---------------------+     +---------------------+     +------------------------+          |
|             |                          |                             |                       |
+-------------|--------------------------|-----------------------------|-----------------------+
              |                          |                             |
              ▼                          ▼                             ▼
  +------------------------+  +------------------------+  +------------------------+
  |    Manufacturing       |  |   Physical Conveyors   |  |    RFID Readers       |
  |    Execution System    |  |   and PLCs             |  |    and Tags           |
  +------------------------+  +------------------------+  +------------------------+
```

## Physical Architecture Deployment

```
+--------------------------------------------------+
|               Production Environment              |
+--------------------------------------------------+
|                                                  |
|   +------------------+     +------------------+  |
|   | Application      |     | Database         |  |
|   | Server           |     | Server           |  |
|   | (WebSphere)      |     | (DB2/Oracle)     |  |
|   +------------------+     +------------------+  |
|            |                        |            |
|            |                        |            |
|   +------------------+     +------------------+  |
|   | Web Server       |     | Backup/DR        |  |
|   | (Apache)         |     | Systems          |  |
|   +------------------+     +------------------+  |
|            |                                     |
|            |                                     |
+------------|-------------------------------------+
             |
             |
+------------|-------------------------------------+
|            ▼                                     |
|   +------------------+                           |
|   | Client           |                           |
|   | Workstations     |                           |
|   +------------------+                           |
|                                                  |
|                                                  |
|   +------------------+     +------------------+  |
|   | PLC Network      |     | MES Systems      |  |
|   | (OMRON)          |     |                  |  |
|   +------------------+     +------------------+  |
|            |                        |            |
|            |                        |            |
|            ▼                        ▼            |
|   +------------------+     +------------------+  |
|   | Physical         |     | RFID             |  |
|   | Conveyors        |     | Infrastructure   |  |
|   +------------------+     +------------------+  |
|                                                  |
+--------------------------------------------------+
|              Factory Floor                       |
+--------------------------------------------------+
```

## Key Component Interactions

1. **Web UI ↔ Service Layer**: HTTP/HTTPS communication for user interaction
2. **Service Layer ↔ Domain Layer**: In-memory object exchange
3. **Domain Layer ↔ Data Access Layer**: JPA/Hibernate ORM mapping
4. **Data Access Layer ↔ Database**: JDBC connections
5. **Service Layer ↔ Integration Layer**: Direct method calls
6. **Integration Layer ↔ External Systems**:
   - MES: JSON over TCP/IP
   - PLC: OMRON FINS protocol over TCP/IP
   - RFID: Custom protocol over TCP/IP

## Communication Protocols

| Connection | Protocol | Format |
|------------|----------|--------|
| Client → Web Server | HTTP/HTTPS | HTML/JSON |
| Web Server → App Server | AJP/HTTP | - |
| App Server → Database | JDBC | SQL |
| App Server → MES | TCP/IP | JSON |
| App Server → PLC | TCP/IP | FINS Protocol |
| PLC → Physical Equipment | I/O Signals | Binary |